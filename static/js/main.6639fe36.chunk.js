(this["webpackJsonpinfinity-scroll"]=this["webpackJsonpinfinity-scroll"]||[]).push([[0],{22:function(e,t,n){},23:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(17),o=n.n(a),s=(n(22),n(3)),i=(n(23),n(7)),u=n(6),b=n.n(u);var j=function(e,t){var n=Object(c.useState)(!0),r=Object(s.a)(n,2),a=r[0],o=r[1],u=Object(c.useState)(""),j=Object(s.a)(u,2),l=j[0],f=j[1],O=Object(c.useState)([]),d=Object(s.a)(O,2),h=d[0],p=d[1],v=Object(c.useState)(!0),g=Object(s.a)(v,2),m=g[0],k=g[1];return Object(c.useEffect)((function(){p([])}),[e]),Object(c.useEffect)((function(){var n;return o(!0),f(!1),b()({method:"GET",url:"http://openlibrary.org/search.json",params:{q:e,page:t},cancelToken:new b.a.CancelToken((function(e){return n=e}))}).then((function(e){console.log(e.data),p((function(t){return Object(i.a)(new Set([].concat(Object(i.a)(t),Object(i.a)(e.data.docs.map((function(e){return e.title}))))))})),k(e.data.docs.length>0),o(!1)})).catch((function(e){b.a.isCancel(e)||f(e)})),function(){return n()}}),[e,t]),{loading:a,error:l,books:h,hasMore:m}},l=n(2);var f=function(){var e=Object(c.useState)(1),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),o=Object(s.a)(a,2),i=o[0],u=o[1],b=j(i,n),f=b.books,O=b.error,d=b.loading,h=b.hasMore,p=Object(c.useRef)(),v=Object(c.useCallback)((function(e){d||(p.current&&p.current.disconnect(),p.current=new IntersectionObserver((function(e){e[0].isIntersecting&&h&&r((function(e){return e+1}))})),e&&p.current.observe(e))}),[d,h]);return Object(c.useEffect)((function(){}),[i]),Object(l.jsxs)("div",{className:"app",children:[Object(l.jsx)("input",{type:"text",value:i,onChange:function(e){r(1),u(e.target.value)}}),f.map((function(e,t){return f.length===t+1?Object(l.jsx)("div",{ref:v,className:"book-item",children:e},e):Object(l.jsx)("div",{className:"book-item",children:e},e)})),O&&Object(l.jsx)("div",{className:"error",children:"Error"}),d&&Object(l.jsx)("div",{className:"loading",children:"...Loading"})]})};o.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(f,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.6639fe36.chunk.js.map